# =============================================================================
# MAIN CONFIGURATION
# =============================================================================

# Application
spring.application.name=CourierDataSimulator
server.port=8080

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# =============================================================================
# COMMON JPA/HIBERNATE/INIT CONFIGURATION (Always Active)
# =============================================================================

# General JPA/Hibernate Settings
spring.jpa.show-sql=false 
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.defer-datasource-initialization=true

# Database Initialization 
spring.sql.init.mode=always
spring.sql.init.data-locations=classpath:data.sql

# ===== H2 Console (for debugging - http://localhost:8080/h2-console) =====
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Activate a profile by default
spring.profiles.active=h2

# ===== OPTION 1: H2 (In-Memory) - Default =====
spring.datasource.url=jdbc:h2:mem:packagedb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop

# ===== OPTION 2: MySQL =====
# spring.datasource.url=jdbc:mysql://localhost:3306/packagedb?createDatabaseIfNotExist=true
# spring.datasource.username=root
# spring.datasource.password=yourpassword
# spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
# spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
# spring.jpa.hibernate.ddl-auto=update

# ===== OPTION 3: PostgreSQL =====
# spring.datasource.url=jdbc:postgresql://localhost:5432/packagedb
# spring.datasource.username=postgres
# spring.datasource.password=postgres
# spring.datasource.driverClassName=org.postgresql.Driver
# spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# spring.jpa.hibernate.ddl-auto=update

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================

spring.kafka.bootstrap-servers=localhost:9092
kafka.topic.packages=package-events

# ===== KAFKA PRODUCER TUNING =====

# FOR HIGH THROUGHPUT (Batch optimized)
spring.kafka.producer.batch-size=16384
spring.kafka.producer.linger-ms=10
spring.kafka.producer.compression-type=snappy

# FOR LOW LATENCY (Streaming optimized)
# spring.kafka.producer.batch-size=0
# spring.kafka.producer.linger-ms=0
# spring.kafka.producer.compression-type=none

# FOR RELIABILITY (Exactly-once)
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.properties.enable-idempotence=true

# Serialization
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.properties.spring.json.add.type.headers=false

# =============================================================================
# PARTITIONING CONFIGURATION
# =============================================================================
kafka.topic.partitions=3
kafka.topic.replication-factor=1

# Partitioning strategy: BY_ID, BY_REGION, BY_STATUS, ROUND_ROBIN
kafka.partitioning.strategy=BY_ID

# =============================================================================
# DATA GENERATION CONFIGURATION
# =============================================================================

# Enable/disable data generation
data.generation.enabled=false

# Traffic pattern: CONSTANT, MORNING_RUSH, SPIKE, REALISTIC, BLACK_FRIDAY
data.generation.pattern=CONSTANT

# Base rate (packages per second)
data.generation.base-rate=10

# Data quality simulation
data.generation.duplicate-rate=0.05
data.generation.error-rate=0.02
data.generation.delay-probability=0.10
data.generation.max-delay-seconds=5

# Package lifecycle probabilities
data.generation.cancellation-rate=0.15
data.generation.completion-rate=0.80

# =============================================================================
# DEFAULT STRATEGY (if no profile specified)
# =============================================================================
ingestion.strategy=MICROBATCH
ingestion.batch.interval-minutes=5
ingestion.batch.max-size=1000

ingestion.microbatch.interval-seconds=1
ingestion.microbatch.max-size=100

ingestion.streaming.enabled=true
ingestion.streaming.async=true

# =============================================================================
# PERFORMANCE MONITORING
# =============================================================================

# Metrics collection
metrics.enabled=true
metrics.log-interval-seconds=30

# Performance tracking
performance.track-latency=true
performance.track-throughput=true
performance.track-resource-usage=true


# =============================================================================
# LOGGING
# =============================================================================

logging.level.com.ekasikci.courierdatasimulator=INFO
logging.level.org.springframework.kafka=WARN
logging.level.org.apache.kafka=WARN

# =============================================================================
# ACTUATOR
# =============================================================================

management.endpoints.web.exposure.include=health,metrics,info
management.endpoint.health.show-details=always
